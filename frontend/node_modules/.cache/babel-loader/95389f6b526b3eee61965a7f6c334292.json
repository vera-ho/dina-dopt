{"ast":null,"code":"import * as SessionUtil from '../util/session_api_util';\nimport jwt_decode from 'jwt-decode';\nexport const RECEIVE_USER_LOGOUT = \"RECEIVE_USER_LOGOUT\";\nexport const RECEIVE_CURRENT_USER = \"RECEIVE_CURRENT_USER\";\nexport const RECEIVE_SESSION_ERRORS = \"RECEIVE_SESSION_ERRORS\";\nexport const RECEIVE_USER_SIGN_IN = \"RECEIVE_USER_SIGN_IN\";\nexport const CLEAR_ERRORS = 'CLEAR_ERRORS';\nexport const receiveCurrentUser = currentUser => ({\n  type: RECEIVE_CURRENT_USER,\n  currentUser\n});\nexport const receiveUserSignIn = () => ({\n  type: RECEIVE_USER_SIGN_IN\n});\nexport const receiveErrors = errors => ({\n  type: RECEIVE_SESSION_ERRORS,\n  errors\n});\nexport const clearErrors = () => ({\n  type: CLEAR_ERRORS\n});\nexport const logoutUser = () => ({\n  type: RECEIVE_USER_LOGOUT\n});\nexport const signup = user => dispatch => SessionUtil.signup(user).then(res => {\n  const {\n    token\n  } = res.data;\n  localStorage.setItem('jwtToken', token);\n  SessionUtil.setAuthToken(token);\n  const decoded = jwt_decode(token);\n  dispatch(receiveCurrentUser(decoded));\n}).catch(err => {\n  dispatch(receiveErrors(err.response.data));\n});\nexport const login = user => dispatch => SessionUtil.login(user).then(res => {\n  const {\n    token\n  } = res.data;\n  localStorage.setItem('jwtToken', token);\n  SessionUtil.setAuthToken(token);\n  const decoded = jwt_decode(token);\n  dispatch(receiveCurrentUser(decoded));\n}).catch(err => {\n  dispatch(receiveErrors(err.response.data));\n});\nexport const logout = () => dispatch => {\n  localStorage.removeItem('jwtToken');\n  SessionUtil.setAuthToken(false);\n  dispatch(logoutUser());\n};","map":{"version":3,"names":["SessionUtil","jwt_decode","RECEIVE_USER_LOGOUT","RECEIVE_CURRENT_USER","RECEIVE_SESSION_ERRORS","RECEIVE_USER_SIGN_IN","CLEAR_ERRORS","receiveCurrentUser","currentUser","type","receiveUserSignIn","receiveErrors","errors","clearErrors","logoutUser","signup","user","dispatch","then","res","token","data","localStorage","setItem","setAuthToken","decoded","catch","err","response","login","logout","removeItem"],"sources":["/Users/alancln/Desktop/dina-dopt/frontend/src/actions/session_actions.js"],"sourcesContent":["import * as SessionUtil from '../util/session_api_util';\nimport jwt_decode from 'jwt-decode';\n\nexport const RECEIVE_USER_LOGOUT = \"RECEIVE_USER_LOGOUT\";\nexport const RECEIVE_CURRENT_USER = \"RECEIVE_CURRENT_USER\";\nexport const RECEIVE_SESSION_ERRORS = \"RECEIVE_SESSION_ERRORS\";\nexport const RECEIVE_USER_SIGN_IN = \"RECEIVE_USER_SIGN_IN\";\nexport const CLEAR_ERRORS = 'CLEAR_ERRORS';\n\nexport const receiveCurrentUser = currentUser => ({\n    type: RECEIVE_CURRENT_USER,\n    currentUser\n});\n\nexport const receiveUserSignIn = () => ({\n    type: RECEIVE_USER_SIGN_IN\n});\n  \nexport const receiveErrors = errors => ({\n    type: RECEIVE_SESSION_ERRORS,\n    errors\n});\n\nexport const clearErrors = () => ({\n    type: CLEAR_ERRORS\n})\n\nexport const logoutUser = () => ({\n    type: RECEIVE_USER_LOGOUT\n});\n\nexport const signup = user => dispatch => (\n    SessionUtil.signup(user)\n        .then(res => {\n            const { token } = res.data;\n            localStorage.setItem('jwtToken', token);\n            SessionUtil.setAuthToken(token);\n            const decoded = jwt_decode(token);\n            dispatch(receiveCurrentUser(decoded))\n        })\n        .catch(err => { dispatch(receiveErrors(err.response.data)) })\n);\n\nexport const login = user => dispatch => (\n    SessionUtil.login(user)\n        .then(res => {\n            const { token } = res.data;\n            localStorage.setItem('jwtToken', token);\n            SessionUtil.setAuthToken(token);\n            const decoded = jwt_decode(token);\n            dispatch(receiveCurrentUser(decoded))\n        })\n        .catch(err => { dispatch(receiveErrors(err.response.data)) })\n)\n\nexport const logout = () => dispatch => {\n    localStorage.removeItem('jwtToken')\n    SessionUtil.setAuthToken(false)\n    dispatch(logoutUser())\n};"],"mappings":"AAAA,OAAO,KAAKA,WAAZ,MAA6B,0BAA7B;AACA,OAAOC,UAAP,MAAuB,YAAvB;AAEA,OAAO,MAAMC,mBAAmB,GAAG,qBAA5B;AACP,OAAO,MAAMC,oBAAoB,GAAG,sBAA7B;AACP,OAAO,MAAMC,sBAAsB,GAAG,wBAA/B;AACP,OAAO,MAAMC,oBAAoB,GAAG,sBAA7B;AACP,OAAO,MAAMC,YAAY,GAAG,cAArB;AAEP,OAAO,MAAMC,kBAAkB,GAAGC,WAAW,KAAK;EAC9CC,IAAI,EAAEN,oBADwC;EAE9CK;AAF8C,CAAL,CAAtC;AAKP,OAAO,MAAME,iBAAiB,GAAG,OAAO;EACpCD,IAAI,EAAEJ;AAD8B,CAAP,CAA1B;AAIP,OAAO,MAAMM,aAAa,GAAGC,MAAM,KAAK;EACpCH,IAAI,EAAEL,sBAD8B;EAEpCQ;AAFoC,CAAL,CAA5B;AAKP,OAAO,MAAMC,WAAW,GAAG,OAAO;EAC9BJ,IAAI,EAAEH;AADwB,CAAP,CAApB;AAIP,OAAO,MAAMQ,UAAU,GAAG,OAAO;EAC7BL,IAAI,EAAEP;AADuB,CAAP,CAAnB;AAIP,OAAO,MAAMa,MAAM,GAAGC,IAAI,IAAIC,QAAQ,IAClCjB,WAAW,CAACe,MAAZ,CAAmBC,IAAnB,EACKE,IADL,CACUC,GAAG,IAAI;EACT,MAAM;IAAEC;EAAF,IAAYD,GAAG,CAACE,IAAtB;EACAC,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCH,KAAjC;EACApB,WAAW,CAACwB,YAAZ,CAAyBJ,KAAzB;EACA,MAAMK,OAAO,GAAGxB,UAAU,CAACmB,KAAD,CAA1B;EACAH,QAAQ,CAACV,kBAAkB,CAACkB,OAAD,CAAnB,CAAR;AACH,CAPL,EAQKC,KARL,CAQWC,GAAG,IAAI;EAAEV,QAAQ,CAACN,aAAa,CAACgB,GAAG,CAACC,QAAJ,CAAaP,IAAd,CAAd,CAAR;AAA4C,CARhE,CADG;AAYP,OAAO,MAAMQ,KAAK,GAAGb,IAAI,IAAIC,QAAQ,IACjCjB,WAAW,CAAC6B,KAAZ,CAAkBb,IAAlB,EACKE,IADL,CACUC,GAAG,IAAI;EACT,MAAM;IAAEC;EAAF,IAAYD,GAAG,CAACE,IAAtB;EACAC,YAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCH,KAAjC;EACApB,WAAW,CAACwB,YAAZ,CAAyBJ,KAAzB;EACA,MAAMK,OAAO,GAAGxB,UAAU,CAACmB,KAAD,CAA1B;EACAH,QAAQ,CAACV,kBAAkB,CAACkB,OAAD,CAAnB,CAAR;AACH,CAPL,EAQKC,KARL,CAQWC,GAAG,IAAI;EAAEV,QAAQ,CAACN,aAAa,CAACgB,GAAG,CAACC,QAAJ,CAAaP,IAAd,CAAd,CAAR;AAA4C,CARhE,CADG;AAYP,OAAO,MAAMS,MAAM,GAAG,MAAMb,QAAQ,IAAI;EACpCK,YAAY,CAACS,UAAb,CAAwB,UAAxB;EACA/B,WAAW,CAACwB,YAAZ,CAAyB,KAAzB;EACAP,QAAQ,CAACH,UAAU,EAAX,CAAR;AACH,CAJM"},"metadata":{},"sourceType":"module"}